<!DOCTYPE html><html lang="en"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.8.3"><!-- Canonical URL --><link rel="canonical" href="https://borolgs.github.io/blog/effector-intro/"><!-- Primary Meta Tags --><title>Introduction to Effector</title><meta name="title" content="Introduction to Effector"><meta name="description" content="Introduction to Effector"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://borolgs.github.io/blog/effector-intro/"><meta property="og:title" content="Introduction to Effector"><meta property="og:description" content="Introduction to Effector"><!-- <meta property="og:image" content={new URL(image, Astro.url)} /> --><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://borolgs.github.io/blog/effector-intro/"><meta property="twitter:title" content="Introduction to Effector"><meta property="twitter:description" content="Introduction to Effector"><!-- <meta property="twitter:image" content={new URL(image, Astro.url)} /> --><link rel="stylesheet" href="/_astro/_slug_.Cm1_-nVk.css"><script type="module">new URLSearchParams(window.location.search).has("s")&&document.querySelector("header")?.remove();
</script></head> <body> <header class="container"> <nav aria-label="breadcrumb" hx-boost="true"> <ul> <li> <a href="/">Blog</a> </li> <li> <a href="/{slug}" aria-current="page"> Introduction to Effector </a> </li> </ul> </nav> </header> <main class="container"> <section> <h1 id="introduction-to-effector">Introduction to Effector</h1>
<blockquote>
<p>[!info] Write business logic with ease
Type safe, reactive, framework agnostic.</p>
</blockquote>
<p><a href="https://effector.dev/">https://effector.dev/</a><br>
<a href="https://effector.dev/en/introduction/motivation/">https://effector.dev/en/introduction/motivation/</a></p>
<p>Effector –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, —Å–æ–±—ã—Ç–∏—è–º–∏ –∏ —Å–≤—è–∑—è–º–∏ –º–µ–∂–¥—É –Ω–∏–º–∏. –°–æ—Å—Ç–æ–∏—Ç –∏–∑ <strong>—é–Ω–∏—Ç–æ–≤</strong> (—Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã) –∏ <strong>–æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤</strong> (–º–µ—Ç–æ–¥—ã –¥–ª—è –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —é–Ω–∏—Ç–∞–º–∏).</p>
<h3 id="units">Units</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#6A737D">// —Å–æ–±—ã—Ç–∏–µ</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> createNote</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createEvent</span><span style="color:#E1E4E8">&#x3C;{</span><span style="color:#FFAB70">text</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">}>();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// —Å—Ç–æ—Ä</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> $notes</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createStore</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">NotesDict</span><span style="color:#E1E4E8">>({});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// —ç—Ñ—Ñ–µ–∫—Ç: –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è —Å–∞–π–¥-—ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (–∫–∞–∫ thunk –≤ redux)</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> createNoteFx</span><span style="color:#E1E4E8">(async (args</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> {</span><span style="color:#FFAB70">text</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">}) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">	return </span><span style="color:#B392F0">fetch</span><span style="color:#E1E4E8">(...);</span></span>
<span class="line"><span style="color:#E1E4E8">})</span></span>
<span class="line"></span></code></pre>
<p>–û–Ω–∏ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è —é–Ω–∏—Ç–∞–º–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ä–∞–∑–Ω–æ–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —É –Ω–∏—Ö –º–Ω–æ–≥–æ –æ–±—â–µ–≥–æ.
–ö–∞–∂–¥—ã–π —é–Ω–∏—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º —Å–æ–±—ã—Ç–∏—è, —Ç–∞–∫ —Ç–µ–º –∫—Ç–æ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç.</p>
<h3 id="model">Model</h3>
<p>–ú–æ–¥–µ–ª—å—é –º—ã –±—É–¥–µ–º –Ω–∞–∑—ã–≤–∞—Ç—å —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç—å <strong>—é–Ω–∏—Ç–æ–≤</strong> –∏ –∏—Ö <strong>—Å–≤—è–∑–µ–π</strong> –º–µ–∂–¥—É –¥—Ä—É–≥ –¥—Ä—É–≥–æ–º.
–í—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∂–∏–≤—É—Ç –≤ –º–æ–¥–µ–ª—è—Ö, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥—Ä—É–≥ –¥—Ä—É–≥–æ–º —Ç–∞–∫ –∂–µ –∫–∞–∫ —Å–≤—è–∑–∞–Ω—ã —é–Ω–∏—Ç—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏ (—Ñ–∏—á–∏ –∏–ª–∏ –º–æ–¥—É–ª—è).</p>
<p>–ú–æ–¥–µ–ª—å —ç—Ç–æ ‚Äú–≤–µ—â—å –≤ —Å–µ–±–µ‚Äù –∏ –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ UI.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#6A737D">// model.ts</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> createNote</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createEvent</span><span style="color:#E1E4E8">&#x3C;{ </span><span style="color:#FFAB70">text</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8"> }>();</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> $notes</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createStore</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">NotesDict</span><span style="color:#E1E4E8">>({});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">$notes.</span><span style="color:#B392F0">on</span><span style="color:#E1E4E8">(createNote, (</span><span style="color:#FFAB70">notes</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">note</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> ({ </span><span style="color:#F97583">...</span><span style="color:#E1E4E8">notes, [</span><span style="color:#B392F0">randomUUID</span><span style="color:#E1E4E8">()]: note }));</span></span>
<span class="line"></span></code></pre>
<p>–ê –≤—Å–µ —á—Ç–æ –¥–µ–ª–∞–µ—Ç UI - —ç—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –º–æ–¥–µ–ª–∏ –∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä—ã —Å –ø–æ–º–æ—â—å—é —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ö—É–∫–æ–≤ (–≤ —Ä–µ–∞–∫—Ç–µ).</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#6A737D">// add-note.tsx</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">button</span><span style="color:#B392F0"> onClick</span><span style="color:#FDAEB7;font-style:italic">=(()</span><span style="color:#FDAEB7;font-style:italic"> =></span><span style="color:#FDAEB7;font-style:italic"> createNote({</span><span style="color:#B392F0"> text</span><span style="color:#FDAEB7;font-style:italic"> })))>Add&#x3C;/button></span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// notes-list.tsx</span></span>
<span class="line"><span style="color:#B392F0">const</span><span style="color:#B392F0"> notes</span><span style="color:#FDAEB7;font-style:italic"> =</span><span style="color:#FDAEB7;font-style:italic"> useStoreMap($notes,</span><span style="color:#B392F0"> notes</span><span style="color:#FDAEB7;font-style:italic"> =></span><span style="color:#FDAEB7;font-style:italic"> Object.entries(notes));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FDAEB7;font-style:italic">&#x3C;ul>{</span></span>
<span class="line"><span style="color:#FDAEB7;font-style:italic">  notes.map(([id,</span><span style="color:#E1E4E8"> {text}</span><span style="color:#FDAEB7;font-style:italic">])</span><span style="color:#FDAEB7;font-style:italic"> =></span><span style="color:#FDAEB7;font-style:italic"> (&#x3C;li</span><span style="color:#B392F0"> key</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{id}>...&#x3C;/</span><span style="color:#85E89D">li</span><span style="color:#E1E4E8">>)</span></span>
<span class="line"><span style="color:#E1E4E8">}</span><span style="color:#F97583">&#x3C;/</span><span style="color:#E1E4E8">ul</span><span style="color:#F97583">></span></span>
<span class="line"></span></code></pre>
<p><strong>REPL: <a href="https://share.effector.dev/HE3o5yNa">https://share.effector.dev/HE3o5yNa</a></strong></p>
<h3 id="methods-vs-operators">Methods vs Operators</h3>
<p>–£ —é–Ω–∏—Ç–æ–≤ –µ—Å—Ç—å –º–µ—Ç–æ–¥—ã, –∫–∞–∫ <code>.on()</code> –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ —É —Å—Ç–æ—Ä–∞ –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –≤—ã—à–µ.<br>
–ß–∞—Å—Ç—å –∏–∑ —ç—Ç–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –æ–±—â–∏–µ –¥–ª—è –≤—Å–µ—Ö —é–Ω–∏—Ç–æ–≤: <code>.map()</code>, <code>.filter()</code> <code>.watch()</code>,<code> .prepend()</code>.<br>
–ö–∞–∫–∏–µ-—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä <code>.use()</code> —É —ç—Ñ—Ñ–µ–∫—Ç–∞.</p>
<p>–ù–æ —Ç–∞–∫ –∂–µ —É —ç—Ñ—Ñ–µ–∫—Ç–æ—Ä–∞ –µ—Å—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä—ã—Ö –º—ã –º–æ–∂–µ–º —Å–≤—è–∑—ã–≤–∞—Ç—å —é–Ω–∏—Ç—ã –∏ –æ–ø–∏—Å—ã–≤–∞—Ç—å –ª–æ–≥–∏–∫—É <em>–î–µ–ö–ª–ê—Ä–ê—Ç–∏–í–Ω–û</em> üåà.</p>
<h3 id="sample">Sample</h3>
<p>–û—Å–Ω–æ–≤–Ω–æ–π –æ–ø–µ—Ä–∞—Ç–æ—Ä —ç—Ñ—Ñ–µ–∫—Ç–æ—Ä–∞.</p>
<p><code>sample</code> - –∫–ª—é—á–µ–≤–æ–π –º–µ—Ç–æ–¥ —ç—Ñ—Ñ–µ–∫—Ç–æ—Ä–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤—è–∑–µ–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–æ–º —Å–æ–±—ã—Ç–∏–π.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#6A737D">// model.ts</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> createNote</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createEvent</span><span style="color:#E1E4E8">&#x3C;{ </span><span style="color:#FFAB70">text</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8"> }>();</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> $notes</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createStore</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">NotesDict</span><span style="color:#E1E4E8">>({});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">//$notes.on(createNote, (notes, note) => ({...notes, [randomUUID()]: note }));</span></span>
<span class="line"><span style="color:#B392F0">sample</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  clock: createNote, </span><span style="color:#6A737D">// clock == on</span></span>
<span class="line"><span style="color:#E1E4E8">  source: $notes,</span></span>
<span class="line"><span style="color:#B392F0">  filter</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">notes</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">note</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> note.text </span><span style="color:#F97583">!==</span><span style="color:#9ECBFF"> ''</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// NEW</span></span>
<span class="line"><span style="color:#B392F0">  fn</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">notes</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">note</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> ({</span><span style="color:#F97583">...</span><span style="color:#E1E4E8">notes, [</span><span style="color:#B392F0">randomUUID</span><span style="color:#E1E4E8">()]: note })),</span></span>
<span class="line"><span style="color:#E1E4E8">  target: $notes,</span></span>
<span class="line"><span style="color:#E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">debug</span><span style="color:#E1E4E8">($notes) </span><span style="color:#6A737D">// {} -> { guid: {text: "hello"} }</span></span>
<span class="line"></span></code></pre>
<p>–ú–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ —Å—Ç–∞–ª–æ —Ö—É–∂–µ, –Ω–æ <em>—ç—Ç–æ –Ω–µ —Ç–∞–∫</em>.
–ù–∞–ø—Ä–∏–º–µ—Ä, —Å <code>.on()</code> –º—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã —Ç–µ–º, —á—Ç–æ <code>target == source == $notes</code>, –∞ <code>sample</code> —Ä–∞–∑–≤—è–∑—ã–≤–∞–µ—Ç –Ω–∞–º —Ä—É–∫–∏.</p>
<p>–î–æ–±–∞–≤–∏–º —Å–∞–π–¥-—ç—Ñ—Ñ–µ–∫—Ç.<br>
–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ http-–∑–∞–ø—Ä–æ—Å–∞, —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ç–æ—Ä–æ–≥–æ, –º—ã –æ–±–Ω–æ–≤–∏–º $notes:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#6A737D">// model.ts</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> createNote</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createEvent</span><span style="color:#E1E4E8">&#x3C;{ </span><span style="color:#FFAB70">text</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8"> }>();</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> $notes</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createStore</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">NotesDict</span><span style="color:#E1E4E8">>({});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> createNoteFx</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createEffect</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">args</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">text</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#B392F0"> fetch</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">...</span><span style="color:#E1E4E8">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">sample</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  clock: createNote,</span></span>
<span class="line"><span style="color:#B392F0">  filter</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">notes</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">note</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> note.text </span><span style="color:#F97583">!==</span><span style="color:#9ECBFF"> ''</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  target: createNoteFx,</span></span>
<span class="line"><span style="color:#E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">sample</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  clock: createNoteFx.doneData,</span></span>
<span class="line"><span style="color:#E1E4E8">  source: $notes,</span></span>
<span class="line"><span style="color:#B392F0">  fn</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">notes</span><span style="color:#E1E4E8">, { </span><span style="color:#FFAB70">id</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">text</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> ({</span><span style="color:#F97583">...</span><span style="color:#E1E4E8">notes, [id]: note }),</span></span>
<span class="line"><span style="color:#E1E4E8">  target: $notes</span></span>
<span class="line"><span style="color:#E1E4E8">})</span></span>
<span class="line"></span></code></pre>
<p><strong>REPL: <a href="https://share.effector.dev/n5NJdZ0f">https://share.effector.dev/n5NJdZ0f</a></strong></p>
<p>–î–æ–±–∞–≤–∏–º –ø–æ–∫–∞–∑ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#6A737D">// notes/model.ts</span></span>
<span class="line"><span style="color:#B392F0">sample</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  clock: createNoteFx.failData,</span></span>
<span class="line"><span style="color:#B392F0">  fn</span><span style="color:#E1E4E8">: ({ </span><span style="color:#FFAB70">message</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> ({ type: </span><span style="color:#9ECBFF">'error'</span><span style="color:#E1E4E8">, message }),</span></span>
<span class="line"><span style="color:#E1E4E8">  target: addNotification,</span></span>
<span class="line"><span style="color:#E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// notifications/model.ts</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> addNotification</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createEvent</span><span style="color:#E1E4E8">&#x3C;{</span></span>
<span class="line"><span style="color:#FFAB70">  type</span><span style="color:#F97583">:</span><span style="color:#9ECBFF"> 'error'</span><span style="color:#F97583"> |</span><span style="color:#9ECBFF"> 'warn'</span><span style="color:#F97583"> |</span><span style="color:#9ECBFF"> 'info'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  message</span><span style="color:#F97583">:</span><span style="color:#9ECBFF"> 'string'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8"> }>();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> addNotificationFx</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createEffect</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">...</span><span style="color:#E1E4E8">) </span><span style="color:#6A737D">// call some notification library</span></span>
<span class="line"></span></code></pre>
<p>–î–æ–±–∞–≤–∏–º –æ—Ç–ø—Ä–∞–≤–∫—É –æ—à–∏–±–∫–∏ –≤ centry.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#6A737D">// notes/model.ts</span></span>
<span class="line"><span style="color:#B392F0">sample</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  clock: createNoteFx.failData,</span></span>
<span class="line"><span style="color:#B392F0">  fn</span><span style="color:#E1E4E8">: ({ </span><span style="color:#FFAB70">message</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> ({ type: </span><span style="color:#9ECBFF">'error'</span><span style="color:#E1E4E8">, message }),</span></span>
<span class="line"><span style="color:#E1E4E8">  target: addNotification,</span></span>
<span class="line"><span style="color:#E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">sample</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  clock: createNoteFx.failData,</span></span>
<span class="line"><span style="color:#B392F0">  filter</span><span style="color:#E1E4E8">: ({ </span><span style="color:#FFAB70">status</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> status </span><span style="color:#F97583">>=</span><span style="color:#79B8FF"> 500</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#B392F0">  fn</span><span style="color:#E1E4E8">: ({ </span><span style="color:#FFAB70">message</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">status</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> ({ message, </span><span style="color:#F97583">...</span><span style="color:#E1E4E8"> }),</span></span>
<span class="line"><span style="color:#E1E4E8">  target: centryError</span></span>
<span class="line"><span style="color:#E1E4E8">})</span></span>
<span class="line"></span></code></pre>
<p><code>sample</code> –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥—Ä–æ–±–∏—Ç—å –ª–æ–≥–∏–∫—É –Ω–∞ c–ª–∞–±–æ—Å–≤—è–∑–∞–Ω–Ω—ã–µ —á–∞—Å—Ç–∏, –∫–∞–∫ –≤ —Ä–∞–º–∫–∞—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏, —Ç–∞–∫ –∏ –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ü–µ–ª–æ–º.</p>
<p>–ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ñ–∏—á–∏ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Ç–æ—á–µ—á–Ω–æ–µ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ –∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–µ–º–ø–ª–æ–≤.</p>
<h3 id="ui-model">UI Model</h3>
<p>–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º —á—Ç–æ –≤ —Ñ–æ—Ä–º–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–π.
–ó–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è –∂–∏–≤–µ—Ç –≤ —Å–≤–æ–µ–º —Å—Ç–æ—Ä–µ –∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞, –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ —ç—Ç–∏—Ö —Å—Ç–æ—Ä–æ–≤:</p>
<p>–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è —á—Ç–æ —Å—Ç–æ—Ä—ã –¥–µ–ª–∞—é—Ç—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∞—Ç–æ–º–∞—Ä–Ω—ã–º–∏, —Ç–∫ –∑–∞—á–∞—Å—Ç—É—é –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —á—Ç–æ —ç—Ç–æ –±–∞–Ω–∞–ª—å–Ω–æ —É–¥–æ–±–Ω–µ–µ.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#6A737D">// features/add-note/model.ts</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> addNote</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createEvent</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> updateTitle</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createEvent</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> addTag</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createEvent</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">string</span><span style="color:#E1E4E8">>();</span></span>
<span class="line"><span style="color:#F97583">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> $title</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createStore</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">""</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">on</span><span style="color:#E1E4E8">(updateTitle, (</span><span style="color:#FFAB70">_</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">title</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> title);</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> $text</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createStore</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">""</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">on</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">...</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> $tags</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createStore</span><span style="color:#E1E4E8">([]);</span></span>
<span class="line"><span style="color:#F97583">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">sample</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  clock: addNote,</span></span>
<span class="line"><span style="color:#E1E4E8">  source: { title: $title, text: $text, tags: $tags },</span></span>
<span class="line"><span style="color:#B392F0">  filter</span><span style="color:#E1E4E8">: ({ </span><span style="color:#FFAB70">title</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">text</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> [title, text].</span><span style="color:#B392F0">every</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">v</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> v </span><span style="color:#F97583">!==</span><span style="color:#79B8FF"> null</span><span style="color:#F97583"> &#x26;&#x26;</span><span style="color:#E1E4E8"> v </span><span style="color:#F97583">!==</span><span style="color:#9ECBFF"> ''</span><span style="color:#E1E4E8">),</span></span>
<span class="line"><span style="color:#E1E4E8">  target: createNote,</span></span>
<span class="line"><span style="color:#E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// features/add-note/ui.tsx</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">title</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">text</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> useUnit</span><span style="color:#E1E4E8">([$title, $text]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">input</span><span style="color:#B392F0"> value</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{title} </span><span style="color:#B392F0">onChange</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{</span><span style="color:#FFAB70">e</span><span style="color:#F97583"> =></span><span style="color:#B392F0"> updateTitle</span><span style="color:#E1E4E8">(e.target.value)} /></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">input</span><span style="color:#B392F0"> value</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{text} </span><span style="color:#FDAEB7;font-style:italic">...</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">button</span><span style="color:#B392F0"> onClick</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{(() </span><span style="color:#F97583">=></span><span style="color:#B392F0"> addNote</span><span style="color:#E1E4E8">())}>Save&#x3C;/</span><span style="color:#85E89D">button</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// entity/notes/model.ts</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> createNote</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> createEvent</span><span style="color:#E1E4E8">&#x3C;{ </span><span style="color:#FFAB70">title</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">text</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">tags</span><span style="color:#F97583">?:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">[] }>();</span></span>
<span class="line"><span style="color:#F97583">...</span></span>
<span class="line"></span></code></pre>
<p>–í –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ –ø—Ä—è–º —Å–∏–ª—å–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏–ª, —Å–º. REPL.</p>
<p><strong>REPL: <a href="https://share.effector.dev/h9SV9NHB">https://share.effector.dev/h9SV9NHB</a></strong></p>
<h3 id="other-operators">Other operators</h3>
<p><code>sample</code> –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –≥–∏–±–∫–∏–π –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤–æ –≤—Å–µ–≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏—è—Ö:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#B392F0">sample</span><span style="color:#E1E4E8">({ source?, clock?, filter?, fn?, target? }): target</span></span>
<span class="line"></span></code></pre>
<ul>
<li>clock –º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å, —Ç–æ–≥–¥–∞ source –≤–º–µ—Å—Ç–æ –Ω–µ–≥–æ.</li>
<li>clock, source –∏ target –º–æ–≥—É—Ç –±—ã—Ç—å —Å–ø–∏—Å–∫–∞–º–∏ —é–Ω–∏—Ç–æ–≤.</li>
<li>source –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—ä–µ–∫—Ç–æ–º –∏–∑ —é–Ω–∏—Ç–æ–≤.</li>
<li>filter –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–µ–π —Ç–∞–∫ –∏ —Å—Ç–æ—Ä–æ–º</li>
<li>–µ—Å–ª–∏ –Ω–µ—Ç target, —Ç–æ sample –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π —é–Ω–∏—Ç. —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ —Å–æ–±—ã—Ç–∏–µ —Ç–∞–∫ –∏ —Å—Ç–æ—Ä.</li>
</ul>
<p>–í—Å–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∏ —Ç–∏–ø—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.<br>
–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –≤—Å–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –ø—Ä–∏–∫—Ä—ã—Ç—ã TS‚Äô–æ–º –∏ —É –≤—Å–µ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—ã–≤–æ–¥ —Ç–∏–ø–æ–≤.</p>
<p>–£ —ç—Ñ—Ñ–µ–∫—Ç–æ—Ä–∞ –µ—Å—Ç—å –µ—â–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –≤—Ö–æ–¥—è—â–∏—Ö –≤ core: <code>combine</code>, <code>merge</code>, <code>split</code>, <code>attach</code>.<br>
–ò –±–æ–ª–µ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ <a href="https://patronum.effector.dev/methods">patronum</a>: <code>debug</code>, <code>debounce</code>, <code>spread</code>, <code>every</code> –∏ –ø—Ä.
–ù–æ –≤—Å–µ—Ö –∏—Ö –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ –∞–ª–∏–∞—Å—ã –Ω–∞–¥ sample (—É—Å–ª–æ–≤–Ω–æ).</p>
<p>–û–¥–Ω–∞ –∏–∑ –∏–¥–µ–π –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —ç—Ñ—Ñ–µ–∫—Ç–æ—Ä–∞ –±—ã–ª–∞ –Ω–µ –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å—Å—è –≤ rxjs, –ø–æ—ç—Ç–æ–º—É –∫–æ–ª-–≤–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ –Ω–µ –±–æ–ª—å—à–æ–µ, –∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–∞–∂–µ –±—É–¥—É—Ç —É–±—Ä–∞–Ω—ã –∏–∑ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏.</p>
<h3 id="testing">Testing</h3>
<p>–ö–æ–º—Ñ–æ—Ä—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –Ω–∞–º –¥–∞—é—Ç —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã.<br>
–ù–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ—Ç–æ—Ä—ã—Ö –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∫–ª—é—á–µ–≤—ã–º —Ñ–∏—à–∫–∞–º —ç—Ñ—Ñ–µ–∫—Ç–æ—Ä–∞.</p>
<p>–ó–∞ —ç—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç <a href="https://effector.dev/en/api/effector/fork/">Fork API</a>.</p>
<p><code>fork()</code> - —Å–æ–∑–¥–∞–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ–ø–∏—é –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–≤—Å–µ —é–Ω–∏—Ç—ã –∏ —Å–≤—è–∑–∏),
—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–¥–º–µ–Ω—è—Ç—å —ç—Ñ—Ñ–µ–∫—Ç—ã –∏ –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–≤.<br>
–ê <code>allSettled(effect, opts)</code> - –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —á—Ç–æ –≤—Å–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ —Å–æ–±—ã—Ç–∏—è –∏–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞ –±—É–¥—É—Ç –∑–∞–≤–µ—Ä—à–µ–Ω—ã.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#B392F0">test</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"add note - success"</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> scope</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> fork</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">   handlers: [</span></span>
<span class="line"><span style="color:#E1E4E8">     [createNoteFx, () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> ({ id: </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, text: </span><span style="color:#9ECBFF">"todo"</span><span style="color:#E1E4E8"> })]</span></span>
<span class="line"><span style="color:#E1E4E8">   ]</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#B392F0"> allSettled</span><span style="color:#E1E4E8">(addNote, { scope, params: { text: </span><span style="color:#9ECBFF">"todo"</span><span style="color:#E1E4E8"> } });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  expect</span><span style="color:#E1E4E8">(scope.</span><span style="color:#B392F0">getState</span><span style="color:#E1E4E8">($notes)).</span><span style="color:#B392F0">toMatchObject</span><span style="color:#E1E4E8">({</span><span style="color:#9ECBFF">"1"</span><span style="color:#E1E4E8">: {text: </span><span style="color:#9ECBFF">"todo"</span><span style="color:#E1E4E8"> }});</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">test</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"add note - fail"</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> addNotificationFxMock</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> jest.</span><span style="color:#B392F0">fn</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> scope</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> fork</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">   handlers: [</span></span>
<span class="line"><span style="color:#E1E4E8">     [createNoteFx, () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> throw </span><span style="color:#F97583">new</span><span style="color:#B392F0"> Error</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'oops'</span><span style="color:#E1E4E8">)],</span></span>
<span class="line"><span style="color:#E1E4E8">     [addNotificationFx, addNotificationFxMock]</span></span>
<span class="line"><span style="color:#E1E4E8">   ]</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#B392F0"> allSettled</span><span style="color:#E1E4E8">(addNote, { scope, params: { text: </span><span style="color:#9ECBFF">"todo"</span><span style="color:#E1E4E8"> } });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  expect</span><span style="color:#E1E4E8">(scope.</span><span style="color:#B392F0">getState</span><span style="color:#E1E4E8">($notes)).</span><span style="color:#B392F0">toMatchObject</span><span style="color:#E1E4E8">({});</span></span>
<span class="line"><span style="color:#B392F0">  expect</span><span style="color:#E1E4E8">(addNotificationFxMock).</span><span style="color:#B392F0">toBeCalledTimes</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span></code></pre>
<h3 id="—Åonclusion">–°onclusion</h3>
<p>–ú–Ω–æ–≥–æ–µ –æ—Å—Ç–∞–ª–æ—Å—å –∑–∞ —Å–∫–æ–±–∫–∞–º–∏: –¥—Ä—É–≥–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –∏ –∏—Ö –∫–æ–º–ø–æ–∑–∏—Ü–∏—è, –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ —é–Ω–∏—Ç—ã(derived), —Ñ–∞–±—Ä–∏–∫–∏, –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞.</p>
<p>–ù–æ —Ç–æ–≥–æ —á—Ç–æ –º—ã —É–∑–Ω–∞–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –≤–µ—Å–µ–ª–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞:</p>
<ul>
<li>—é–Ω–∏—Ç—ã <a href="https://effector.dev/en/api/effector/event/"><code>event</code></a>, <a href="https://effector.dev/en/api/effector/store/"><code>store</code></a> –∏ <a href="https://effector.dev/en/api/effector/effect/"><code>effect</code></a></li>
<li>–æ–ø–µ—Ä–∞—Ç–æ—Ä <a href="https://effector.dev/en/api/effector/sample/"><code>sample</code></a></li>
<li>—Ä–µ–∞–∫—Ç-—Ö—É–∫–∏ <a href="https://effector.dev/en/api/effector-react/useunit/"><code>useUnit</code></a> –∏ <a href="https://effector.dev/en/api/effector-react/usestoremap/"><code>useStoreMap</code></a></li>
<li>–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º <code>.watch()</code> <del>–¥–ª—è –ª–æ–≥–∏–∫–∏</del>, –≤–æ–æ–±—â–µ –µ–≥–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º, —Å–º. <a href="https://patronum.effector.dev/methods/debug/"><code>debug</code></a></li>
<li>–ø–æ–º–Ω–∏–º —á—Ç–æ –≤—Å–µ —é–Ω–∏—Ç—ã –∏ —Å–≤—è–∑–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω—ã —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏ (–Ω–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö!)</li>
</ul>
<p>–ò—Ç–æ–≥–æ, –æ—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è —ç—Ñ—Ñ–µ–∫—Ç–æ—Ä–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–º:
C–æ–±—ã—Ç–∏—è –∏ —Å—Ç–æ—Ä—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç, –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏ –∏ UI, –∞ –≤—Å—è –ª–æ–≥–∏–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ –ª–µ–≥–∫–æ ‚Äú—Ä–∞–∑—Ä—ã–≤–∞–µ–º—ã—Ö‚Äù –∏ —Å–≤–æ–±–æ–¥–Ω–æ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ–º—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞—Ö.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="mermaid"><code><span class="line"><span style="color:#E1E4E8">flowchart LR</span></span>
<span class="line"><span style="color:#E1E4E8">	$notes</span></span>
<span class="line"><span style="color:#E1E4E8">	createNote["createNote()"]</span></span>
<span class="line"><span style="color:#E1E4E8">	createNoteFx["createNoteFx()"]</span></span>
<span class="line"><span style="color:#E1E4E8">	addNote["addNote()"]</span></span>
<span class="line"><span style="color:#E1E4E8">	addNoteSample{sample}</span></span>
<span class="line"><span style="color:#E1E4E8">	createNoteSample{sample}</span></span>
<span class="line"><span style="color:#E1E4E8">	syncNoteSample{sample}</span></span>
<span class="line"><span style="color:#E1E4E8">	addNotification["addNotification()"]</span></span>
<span class="line"><span style="color:#E1E4E8">	error["error()"]</span></span>
<span class="line"><span style="color:#E1E4E8">	createNoteReq["POST /api/notes"]</span></span>
<span class="line"><span style="color:#E1E4E8">	%%updateNoteReq["PUT /api/notes"]</span></span>
<span class="line"><span style="color:#E1E4E8">	%%getNotesReq["GET /api/notes"]</span></span>
<span class="line"><span style="color:#E1E4E8">	$title</span></span>
<span class="line"><span style="color:#E1E4E8">	$text</span></span>
<span class="line"><span style="color:#E1E4E8">	$fields</span></span>
<span class="line"><span style="color:#E1E4E8">	button["&#x3C; button />"]</span></span>
<span class="line"><span style="color:#E1E4E8">	titleInput["&#x3C; input />"]</span></span>
<span class="line"><span style="color:#E1E4E8">	textInput["&#x3C; input />"]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	notesList["&#x3C; ul />"]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	classDef i fill:#2a9d8f,color: white</span></span>
<span class="line"><span style="color:#E1E4E8">	classDef m fill:#e76f51,color: white</span></span>
<span class="line"><span style="color:#E1E4E8">	classDef p fill:#264653,color: white</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    style Model fill:#edede9</span></span>
<span class="line"><span style="color:#E1E4E8">    style UI fill:#edede9</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	subgraph Model</span></span>
<span class="line"><span style="color:#E1E4E8">		subgraph notes/model.ts</span></span>
<span class="line"><span style="color:#E1E4E8">		    createNote:::i</span></span>
<span class="line"><span style="color:#E1E4E8">		    createNoteFx:::p</span></span>
<span class="line"><span style="color:#E1E4E8">	        createNoteSample:::m</span></span>
<span class="line"><span style="color:#E1E4E8">	        syncNoteSample:::m</span></span>
<span class="line"><span style="color:#E1E4E8">		    $notes:::i</span></span>
<span class="line"><span style="color:#E1E4E8">	    end</span></span>
<span class="line"><span style="color:#E1E4E8">		subgraph sahred/api.ts</span></span>
<span class="line"><span style="color:#E1E4E8">		createNoteFx ---> createNoteReq</span></span>
<span class="line"><span style="color:#E1E4E8">	end</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	    subgraph notifications/model.ts</span></span>
<span class="line"><span style="color:#E1E4E8">		    syncNoteSample ---> addNotification:::i</span></span>
<span class="line"><span style="color:#E1E4E8">	    end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	    subgraph centry.ts</span></span>
<span class="line"><span style="color:#E1E4E8">		    createNoteSample ---> error:::i</span></span>
<span class="line"><span style="color:#E1E4E8">	    end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	    subgraph add-note/model.ts</span></span>
<span class="line"><span style="color:#E1E4E8">		    addNote:::i --clock--> addNoteSample</span></span>
<span class="line"><span style="color:#E1E4E8">		    $title:::i --combine--> $fields</span></span>
<span class="line"><span style="color:#E1E4E8">		    $text:::i --combine--> $fields</span></span>
<span class="line"><span style="color:#E1E4E8">		    $fields --source--> addNoteSample</span></span>
<span class="line"><span style="color:#E1E4E8">		    addNoteSample:::m --target--> createNote</span></span>
<span class="line"><span style="color:#E1E4E8">	    end</span></span>
<span class="line"><span style="color:#E1E4E8">    end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    subgraph UI</span></span>
<span class="line"><span style="color:#E1E4E8">        subgraph AddNote.tsx</span></span>
<span class="line"><span style="color:#E1E4E8">		    button</span></span>
<span class="line"><span style="color:#E1E4E8">		    titleInput</span></span>
<span class="line"><span style="color:#E1E4E8">		    textInput</span></span>
<span class="line"><span style="color:#E1E4E8">		end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">		subgraph NoteList.tsx</span></span>
<span class="line"><span style="color:#E1E4E8">			notesList</span></span>
<span class="line"><span style="color:#E1E4E8">		end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	    button --> addNote</span></span>
<span class="line"><span style="color:#E1E4E8">	    titleInput --‚Üê useUnit--- $title</span></span>
<span class="line"><span style="color:#E1E4E8">	    textInput --‚Üê useUnit--- $text</span></span>
<span class="line"><span style="color:#E1E4E8">	    notesList --‚Üê useStoreMap--- $notes</span></span>
<span class="line"><span style="color:#E1E4E8">    end</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<h3 id="references">References</h3>
<p>–≠–∫–æ—Å–∏—Å—Ç–µ–º–∞</p>
<ul>
<li><a href="https://effector.dev/en/introduction/ecosystem/">https://effector.dev/en/introduction/ecosystem/</a></li>
<li><a href="https://patronum.effector.dev/methods">https://patronum.effector.dev/methods</a> - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤</li>
<li><a href="https://farfetched.pages.dev/">https://farfetched.pages.dev/</a> - –¢–∏–ø–∞ RTK/React Query</li>
<li><a href="https://atomic-router.github.io/">https://atomic-router.github.io/</a> - –†–æ—É—Ç–µ—Ä</li>
</ul>
<p>–°—Ç–∞—Ç—å–∏</p>
<ul>
<li><a href="https://effector.dev/en/guides/testing/">https://effector.dev/en/guides/testing/</a></li>
<li><a href="https://effector.dev/en/guides/server-side-rendering/">https://effector.dev/en/guides/server-side-rendering/</a></li>
<li><a href="https://withease.pages.dev/magazine/">https://withease.pages.dev/magazine/</a></li>
<li><a href="https://withease.pages.dev/magazine/migration_from_redux">https://withease.pages.dev/magazine/migration_from_redux</a></li>
</ul> </section> </main> <footer class="container"></footer> </body></html>